---
title: "ABC279F"
tags: []
author: "reechee"
created: "2022-12-06 15:50:20"
---

## 题意

有 $N$ 个从 $1$ 到 $N$ 编号的盒子，有 $10^{100}$ 个从 $1$ 到 $10^{100}$ 编号的球，初始时编号为 $i$ 的盒子装着编号为 $i$ 的球。

有 $Q$ 次如下操作：

- `1 X Y`，将盒子 $Y$ 内的所有球都倒进盒子 $X$ 内，保证 $X \neq Y$。

- `2 X`，将编号为 $k+1$ 的球放入盒子 $X$ 内，$k$ 为总共装在盒子内球的数量。

- `3 X`，询问装着编号为 $X$ 的球的盒子的编号。

## 数据范围

- $2 \leq N \leq 3 \times 10^5$

- $1 \leq Q \leq 3 \times 10^5$

- 对于第 $1$ 种操作，$1 \leq X,Y \leq N$ 且 $X \neq Y$。

- 对于第 $2$ 种操作，$1 \leq X \leq N$。

- 对于第 $3$ 种操作，保证询问时编号为 $X$ 的球一定被装在某个盒子里。

- 至少有一次第 $3$ 种操作。

## 输入格式

第一行输入两个正整数 $N,Q$。

接下来 $Q$ 行中，每行一个形如题意所述的操作。

## 输出格式

对于每次第 $3$ 种操作输出其答案。

## 样例

### 输入样例 #1

```
5 10
3 5
1 1 4
2 1
2 4
3 7
1 3 1
3 4
1 1 4
3 7
3 6
```

### 输出样例 #1

```
5
4
3
1
3
```

### 样例解释 #1

共有 $10$ 次操作。

- 第 $1$ 次操作为第 $3$ 种操作，球 $5$ 在盒子 $5$ 内。

- 第 $2$ 次操作为第 $1$ 种操作，将盒子 $4$ 内的所有球都倒进盒子 $1$ 内。

- - 现在盒子 $1$ 有球 $1,4$，盒子 $4$ 为空。

- 第 $3$ 次操作为第 $2$ 种操作，把球 $6$ 放在盒子 $1$ 内。

- 第 $4$ 次操作为第 $2$ 种操作，把球 $7$ 放在盒子 $4$ 内。

- 第 $5$ 次操作为第 $3$ 种操作，球 $7$ 在盒子 $4$ 内。

- 第 $6$ 次操作为第 $1$ 种操作，将盒子 $1$ 内的所有球都倒进盒子 $3$ 内。

- - 现在盒子 $3$ 有球 $1,3,4,6$，盒子 $1$ 为空。

- 第 $7$ 次操作为第 $3$ 种操作，球 $4$ 在盒子 $3$ 内。

- 第 $8$ 次操作为第 $1$ 种操作，将盒子 $4$ 内的所有球都倒进盒子 $1$ 内。

- - 现在盒子 $1$ 有球 $7$，盒子 $4$ 为空。

- 第 $9$ 次操作为第 $3$ 种操作，球 $7$ 在盒子 $1$ 内。

- 第 $10$ 次操作为第 $3$ 种操作，球 $6$ 在盒子 $3$ 内。